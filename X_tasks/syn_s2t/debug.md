

# temp- debugging 

请检查
sync_s2t.py
meta_data_manager.py 
git_change_tracker.py 
target_file_updater.py 
log_manager.py 

// 根据文件同步原则，目前发现故障：
移动源文件到不同目录时，meta 中丢失了一些文件


# block 报错？
// 目前已经满足了源文件操作要求，接下来请修改代码，满足目标文件的操作要求。

请注意，所有的block都是按照meta 标准定义的，也就是源文件和目标文件共享了meta文件，其中的block id号一一对应，带有id号的块之间的相对位置（排序）绝对不会改变。

在修改目标文件的时候，只是做了块block 的内容修改（文字翻译），可能由于不同语言文字的内容的长度差异，导致块的文字行数不同，块之间的间距不同，或者块的位置有移动。块block 可能是很脆弱的，导致再次运行程序后，block id 可能会报错，从而阻止我们保存被修改的目标文件。

所以，需要重新检查代码，可能需要设计设计一种更好的block id检测机制，应该灵活且足够精确，确保不会导致程序误判block 被改变，导致违反了目标文件的操作原则。



## 文件同步原则要求
文件只能单向流动，仅仅只能从源目录到目标目录，不能逆向同步，若某目标目录的文件被修改，则不能同步影响并修改源文件和其他目标目录的文件；

## 源文件操作：
1. 源文件的新增或删除：则其相应的目标文件也要同步新增或删除;
2. 源文件中内容块的新增或删除：则其相应id的目标文件中的块也要同步新增或删除；
3. 源文件中内容块的修改：应该复制该块的全部内容，并覆盖到目标文件相应的块上，目标文件内其他块保持原状不变，仅仅同步修改相应id的内容块；


## 目标文件操作：
- 1.可在现有文件的块中做内容修改，例如增减和翻译文字等等，且被修改的内容在目标文件中得到保留，运行主程序后，不会将源文件的相应块的内容再次复制并覆盖到目标文件中；
- 3.不可在目标文件中新增或删减块（block）；
- 4.不可在目标目录中新增或删减文件；
- 如果违反以上3和4项操作原则，运行程序时，应给予警告并废除操作，让文件恢复到违规操作之前的状态；

## meta 文件同步记录
对任何源文件和目标文件的修改操作，在meta文件中也采取同步记录，块级的内容修改，将同步保存在“content”中；
请确保，始终跟踪记录，并保持和源文件相同的目录文件结构。


# 灵活扩展功能：多语言互译

为目标文件的后续翻译功能预留扩展性接口，从任意某一种语言翻译成另外一种语言，实现方法：任意切换源和目标文件目录即可

例如：把source_dir源目录 zh切换为target_dir目标目录；把target_dir目标目录 ru切换为source_dir源目录；

由于每个目标目录的文件后期都已经被翻译成各自语言版本，内容各不相同，但所有目录内容的同相对路径和文件名的文件都共享同一份meta数据。

切换源和目标的文件目录后，启动主程序初始化，出现以下情况：
1. 若已经有目标文件和meta文件，且新的源目录中没有任何块级内容的修改，那么程序不会执行任何操作，不会将源文件同步复制到目标文件中；
2. 若目标和meta目录中文件为空，则遵循```sync_s2t.md```中的文件同步原则，开始初始化并同步复制文件到目标目录中，并在meta中创建记录；

git_change_tracker.py meta_data_manager.py target_file_updater.py ？

